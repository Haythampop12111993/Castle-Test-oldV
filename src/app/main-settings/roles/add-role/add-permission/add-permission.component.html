
 <div class="row bg_w m-0">
  <div class="container-fluid mt-4 pt-3 pb-4">

   <div class="col-12 mb-3">
      <button
        type="button"
        class="btn btn-light border btn-width ml-2 mb-2"
        [ngClass]="{ 'btn-dark': filtered == '' }"
        (click)="allModules()"
      >
        All
      </button>
      <ng-container *ngFor="let module of filters">
        <button
          type="button"
          class="btn btn-light border btn-width ml-2 mb-2"
          [ngClass]="{ 'btn-dark': filtered == module.name }"
          (click)="filterModule(module)"
        >
          {{ module.name }}
        </button>
      </ng-container>
    </div>

    <div class="table-responsive col-12 mb-3">
      <table class="table">
        <thead class="table-secondary">
          <tr>
            <th>Module</th>
            <th>Permissions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let module of modules">
            <td>{{ module.name }}</td>
            <td class="perm">
              <table class="table table-borderless">
                <tr>
                  <td class="flex">
                    <div class="select-all">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        [name]="module.name"
                        value=""
                        [id]="module.name"
                        [(ngModel)]="module.allSelected"
                        (change)="selectAllPermissions(module, $event.target)"
                      />
                      <label class="form-check-label break-word" [for]="module.name"> Select All </label>
                    </div>
                    <div class="permissions">
                      <div class="row">
                        <div class="col-sm-4 pb-2 d-flex" *ngFor="let permission of module.permissions">
                          <input
                            class="form-check-input"
                            type="checkbox"
                            [name]="permission.id"
                            value=""
                            [(ngModel)]="permission.isChecked"
                            [id]="permission.id"
                            (change)="selectPermission(permission)"
                          />
                          <label
                            class="form-check-label break-word"
                            [for]="permission.id"
                            [ngClass]="{ depend: permission.isParent && !permission.isChecked }"
                          >
                            {{ permission.name }}
                            <i
                              class="fa fa-exclamation-circle mr-1"
                              [matTooltip]="permission.description"
                              matTooltipPosition="above"
                              matTooltipClass="example-tooltip-red"
                              *ngIf="permission.description"
                            ></i>
                            <i
                              class="fa fa-exclamation-circle"
                              [matTooltip]="
                                'this permission dependent on other permissions to select , [ ' +
                                permission.depends_on +
                                ' ]'
                              "
                              matTooltipPosition="above"
                              matTooltipClass="example-tooltip-red"
                              [ngClass]="{ depend_icon: !permission.isChecked, 'text-danger': permission.isChecked }"
                              *ngIf="!module.allSelected && permission.depends_on"
                            ></i>
                          </label>
                        </div>
                      </div>
                    </div>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div> 
